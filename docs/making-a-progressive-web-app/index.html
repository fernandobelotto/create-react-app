<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="search" type="application/opensearchdescription+xml" title="Create React App" href="/create-react-app/opensearch.xml"><title data-react-helmet="true">Fazendo um Progressive Web App | Create React App</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" property="og:image" content="https://fernandobelotto.github.io/create-react-app/img/logo-og.png"><meta data-react-helmet="true" property="twitter:image" content="https://fernandobelotto.github.io/create-react-app/img/logo-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Create React App"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Fazendo um Progressive Web App | Create React App"><meta data-react-helmet="true" name="description" content="A constru√ß√£o de produ√ß√£o (build) tem todas as ferramentas necess√°rias para gerar um"><meta data-react-helmet="true" property="og:description" content="A constru√ß√£o de produ√ß√£o (build) tem todas as ferramentas necess√°rias para gerar um"><meta data-react-helmet="true" property="og:url" content="https://fernandobelotto.github.io/create-react-app/docs/making-a-progressive-web-app"><link data-react-helmet="true" rel="shortcut icon" href="/create-react-app/img/favicon/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://fernandobelotto.github.io/create-react-app/docs/making-a-progressive-web-app"><link rel="stylesheet" href="/create-react-app/styles.1042f31c.css">
<link rel="preload" href="/create-react-app/styles.ee02bf09.js" as="script">
<link rel="preload" href="/create-react-app/runtime~main.46b2878b.js" as="script">
<link rel="preload" href="/create-react-app/main.7b3c9247.js" as="script">
<link rel="preload" href="/create-react-app/1.6d04e557.js" as="script">
<link rel="preload" href="/create-react-app/2.8f050254.js" as="script">
<link rel="preload" href="/create-react-app/53.4a790ed9.js" as="script">
<link rel="preload" href="/create-react-app/56.4a6d8523.js" as="script">
<link rel="preload" href="/create-react-app/f976f453.32957a55.js" as="script">
<link rel="preload" href="/create-react-app/17896441.59709a41.js" as="script">
<link rel="preload" href="/create-react-app/04e55f46.e1c2cc54.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/create-react-app/"><img class="navbar__logo" src="/create-react-app/img/logo.svg" alt="Create React App Logo"><strong class="navbar__title">Create React App</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/create-react-app/docs/getting-started">Docs</a><a href="https://reactjs.org/community/support.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Ajuda</a><a href="https://www.github.com/facebook/create-react-app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">‚åò</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/create-react-app/"><img class="navbar__logo" src="/create-react-app/img/logo.svg" alt="Create React App Logo"><strong class="navbar__title">Create React App</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/create-react-app/docs/getting-started">Docs</a></li><li class="menu__list-item"><a href="https://reactjs.org/community/support.html" target="_blank" rel="noopener noreferrer" class="menu__link">Ajuda</a></li><li class="menu__list-item"><a href="https://www.github.com/facebook/create-react-app" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Bem-vindo</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/documentation-intro">Sobre o Docs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Come√ßando</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/getting-started">Come√ßando</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/folder-structure">Estrutura de Pastas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/available-scripts">Scripts Dispon√≠veis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/supported-browsers-features">Navegadores e Funcionalidades compat√≠veis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/updating-to-new-releases">Atualizando para novos lan√ßamentos</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Desenvolvimento</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/setting-up-your-editor">Configura√ß√£o de Editor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/developing-components-in-isolation">Desenvolvendo componentes isoladamente</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/analyzing-the-bundle-size">Analisando o tamanho do bundle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/using-https-in-development">HTTPS em desenvolvimento</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Estiliza√ß√£o e Assets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/adding-a-stylesheet">Adicionando Stylesheets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/adding-a-css-modules-stylesheet">Adicionando CSS Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/adding-a-sass-stylesheet">Adicionando Stylesheet Sass</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/adding-css-reset">Adicionando uma redefini√ß√£o de CSS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/post-processing-css">P√≥s-processamento CSS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/adding-images-fonts-and-files">Adicionando Imagens, Fontes, e Arquivos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/loading-graphql-files">Carregando arquivos .graphql</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/using-the-public-folder">Usando a pasta Public</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/code-splitting">Code Splitting</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Construindo seu aplicativo</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/installing-a-dependency">Instalando uma Depend√™ncia</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/importing-a-component">Importando um Componente</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/using-global-variables">Usando Vari√°veis ‚Äã‚ÄãGlobais</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/adding-bootstrap">Adicionando Bootstrap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/adding-flow">Adicionando Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/adding-typescript">Adicionando TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/adding-relay">Adicionando Relay</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/adding-a-router">Adicionando um Router</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/adding-custom-environment-variables">Vari√°veis de Ambiente</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/create-react-app/docs/making-a-progressive-web-app">Fazendo um Progressive Web App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/measuring-performance">Medindo o desempenho</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create-react-app/docs/production-build">Criando o build de produ√ß√£o</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testando</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/running-tests">Executando testes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/debugging-tests">Depurando testes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Integra√ß√£o com Back-End</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/proxying-api-requests-in-development">Proxying em desenvolvimento</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/fetching-data-with-ajax-requests">Fetch de dados</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/integrating-with-an-api-backend">Integrando com uma API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/title-and-meta-tags">Tags Title &amp; Meta</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Implanta√ß√£o</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/deployment">Implanta√ß√£o</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Uso Avan√ßado</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/custom-templates">Modelos personalizados</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/can-i-use-decorators">Posso usar decorators?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/pre-rendering-into-static-html-files">Pr√©-renderizando HTML est√°tico</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/advanced-configuration">Configura√ß√£o avan√ßada</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/alternatives-to-ejecting">Alternativas para eject</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Ajuda</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create-react-app/docs/troubleshooting">Solu√ß√£o de problemas</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Fazendo um Progressive Web App</h1></header><div class="markdown"><p>A constru√ß√£o de produ√ß√£o (build) tem todas as ferramentas necess√°rias para gerar um
<a href="https://developers.google.com/web/progressive-web-apps/" target="_blank" rel="noopener noreferrer">Progressive Web App</a> de primeira classe, mas <strong>o comportamento offline/cache-first √© apenas opicional</strong>.</p><p>A partir da vers√£o 4 do Create React App, voc√™ pode adicionar um arquivo <code>src/service-worker.js</code> ao seu projeto para usar o suporte integrado para <a href="https://developers.google.com/web/tools/plug-in" target="_blank" rel="noopener noreferrer">Workbox</a>&#x27;s <a href="https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-webpack-plugin.InjectManifest" target="_blank" rel="noopener noreferrer"><code>InjectManifest</code></a>, que ir√° <a href="https://developers.google.com/web/tools/workbox/guides/using-bundlers" target="_blank" rel="noopener noreferrer">compilar</a> seu service worker e injete nele uma lista de URLs para <a href="https://developers.google.com/web/tools/workbox/guides/precache-files" target="_blank" rel="noopener noreferrer">pr√©-cache</a>.</p><p>Se voc√™ iniciar um novo projeto usando um dos PWA <a href="https://create-react-app.dev/docs/custom-templates/" target="_blank" rel="noopener noreferrer">modelos personalizados</a>, voc√™ obter√° um arquivo <code>src/service-worker.js</code> que serve como um bom ponto de partida para um service worker off-line priorit√°rio:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npx create-react-app my-app --template cra-template-pwa</span></div></div></div></div></div><p>O equivalente em TypeScript √©:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npx create-react-app my-app --template cra-template-pwa-typescript</span></div></div></div></div></div><p>Se voc√™ sabe que n√£o usar√° service workers, ou se preferir usar uma abordagem diferente para lidar com o service worker, n√£o crie um arquivo <code>src/service-worker.js</code>. O plugin <code>InjectManifest</code> n√£o ser√° executado neste caso.</p><p>In addition to creating your local <code>src/service-worker.js</code> file, it needs to be registered before it will be used. In order to opt-in to the offline-first behavior, developers should look for the following in their <a href="https://github.com/facebook/create-react-app/blob/master/packages/cra-template/template/src/index.js" target="_blank" rel="noopener noreferrer"><code>src/index.js</code></a>
Al√©m de criar seu arquivo local <code>src/service-worker.js</code>, ele precisa ser registrado antes de ser usado. Para optar pelo comportamento offline-first, os desenvolvedores devem procurar em seu arquivo <a href="https://github.com/facebook/create-react-app/blob/master/packages/cra-template/template/src/index.js" target="_blank" rel="noopener noreferrer"><code>src/index.js</code></a>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Se voc√™ deseja que seu aplicativo funcione offline e carregue mais r√°pido, voc√™ pode alterar</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// unregister() para register() abaixo. Observe que isso traz algumas armadilhas.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Saiba mais sobre service workers: https://cra.link/PWA</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">serviceWorker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">unregister</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>Como afirma o coment√°rio, alternar <code>serviceWorker.unregister()</code> para <code>serviceWorker.register()</code> ir√° permitir que voc√™ use o service worker.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="por-que-ativar"></a>Por que ativar?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#por-que-ativar" title="Direct link to heading">#</a></h2><p>Os Progressive Web Apps Offline-first s√£o mais r√°pidos e confi√°veis ‚Äã‚Äãdo que as p√°ginas da web tradicionais e fornecem uma experi√™ncia m√≥vel envolvente:</p><ul><li>Todos os ativos est√°ticos do site que fazem parte da sua build <code>webpack</code> s√£o armazenados em cache para que sua p√°gina carregue rapidamente nas visitas subsequentes, independentemente da conectividade de rede (como 2G ou 3G). As atualiza√ß√µes s√£o baixadas em segundo plano.</li><li>Seu aplicativo funcionar√° independentemente do estado da rede, mesmo offline. Isso significa que seus usu√°rios poder√£o usar seu aplicativo a 10.000 p√©s e no metr√¥.</li><li>Em dispositivos m√≥veis, seu aplicativo pode ser adicionado diretamente √† tela inicial do usu√°rio, √≠cone do aplicativo e tudo. Isso elimina a necessidade da loja de aplicativos.</li></ul><p>However, they <a href="https://github.com/facebook/create-react-app/issues/2398" target="_blank" rel="noopener noreferrer">can make debugging deployments more challenging</a>.
No entanto, eles <a href="https://github.com/facebook/create-react-app/issues/2398" target="_blank" rel="noopener noreferrer">podem tornar depura√ß√£o de implanta√ß√£o mais desafiadoras</a>.</p><p>O <a href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin" target="_blank" rel="noopener noreferrer"><code>workbox-webpack-plugin</code></a> √© integrado √† configura√ß√£o de produ√ß√£o e se encarregar√° de compilar um arquivo service worker que ir√° pr√©-armazenar em cache automaticamente todos os seus ativos gerados pelo <code>webpack</code> e mant√™-los atualizados conforme voc√™ implanta atualiza√ß√µes. O service worker usar√° uma <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-falling-back-to-network" target="_blank" rel="noopener noreferrer">estrat√©gia de cache-first</a> para lidar com todas as solicita√ß√µes de recursos gerados pelo <code>webpack</code>, incluindo <a href="https://developers.google.com/web/fundamentals/primers/service-workers/high-performance-loading#first_what_are_navigation_requests" target="_blank" rel="noopener noreferrer">solicita√ß√µes de navega√ß√£o</a> para seu HTML, garantindo que seu aplicativo da web seja consistentemente r√°pido, mesmo em uma rede lenta ou n√£o confi√°vel.</p><p>Nota: Recursos que n√£o s√£o gerados pelo <code>webpack</code>, como arquivos est√°ticos que s√£o copiados de seu <a href="https://github.com/facebook/create-react-app/blob/master/packages/cra-template/template/public/" target="_blank" rel="noopener noreferrer">diret√≥rio local <code>public/</code></a> ou recursos de terceiros, n√£o ser√£o pr√©-armazenados. Voc√™ pode configurar opcionalmente o Workbox <a href="https://developers.google.com/web/tools/workbox/guides/route-requests" target="_blank" rel="noopener noreferrer">routes</a> para aplicar a estrat√©gia de cache de tempo de execu√ß√£o de sua escolha a esses recursos.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="personaliza√ß√£o"></a>Personaliza√ß√£o<a aria-hidden="true" tabindex="-1" class="hash-link" href="#personaliza√ß√£o" title="Direct link to heading">#</a></h2><p>A partir do Create React App 4, voc√™ tem controle total sobre a personaliza√ß√£o da l√≥gica neste service worker, criando seu pr√≥prio arquivo <code>src/service-worker.js</code>, ou personalizando aquele adicionado pelo template <code>cra-template-pwa</code> ( ou <code>cra-template-pwa-typescript</code>). Voc√™ pode usar <a href="https://developers.google.com/web/tools/workbox/modules" target="_blank" rel="noopener noreferrer">m√≥dulos adicionais</a> do projeto Workbox, adicionar uma biblioteca de notifica√ß√£o push ou remover parte da l√≥gica de cache padr√£o. O √∫nico requisito √© que voc√™ mantenha <code>self.__WB_MANIFEST</code> em algum lugar em seu arquivo, j√° que o plugin de compila√ß√£o do Workbox verifica este valor ao gerar um manifesto de URLs para pr√©-armazenar em cache. Se voc√™ preferir n√£o usar o precaching, pode atribuir <code>self.__WB_MANIFEST</code> a uma vari√°vel que ser√° ignorada, como:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// eslint-disable-next-line no-restricted-globals</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> ignored </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">__WB_MANIFEST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Seu c√≥digo do service worker customizado vai aqui.</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="considera√ß√µes-sobre-offline-first"></a>Considera√ß√µes sobre Offline-First<a aria-hidden="true" tabindex="-1" class="hash-link" href="#considera√ß√µes-sobre-offline-first" title="Direct link to heading">#</a></h2><p>Se voc√™ decidir aceitar o registro do service worker, leve em considera√ß√£o o seguinte:</p><ol><li><p>Depois que o cache inicial √© feito, o <a href="https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle" target="_blank" rel="noopener noreferrer">ciclo de vida do service worker</a> controla quando o conte√∫do atualizado acaba sendo mostrado aos usu√°rios. Para se proteger contra <a href="https://github.com/facebook/create-react-app/issues/3613#issuecomment-353467430" target="_blank" rel="noopener noreferrer">condi√ß√µes de corrida com conte√∫do carregado lentamente</a>, o comportamento padr√£o √© manter o servi√ßo atualizado de forma conservadora trabalhador no estado &quot;<a href="https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle#waiting" target="_blank" rel="noopener noreferrer">em espera</a>&quot;. Isso significa que os usu√°rios acabar√£o vendo o conte√∫do mais antigo at√© que fechem (recarregar n√£o √© suficiente) suas guias abertas existentes. Consulte <a href="https://jeffy.info/2018/10/10/sw-in-c-r-a.html" target="_blank" rel="noopener noreferrer">esta postagem do blog</a> para obter mais detalhes sobre esse comportamento.</p></li><li><p>Os usu√°rios nem sempre est√£o familiarizados com os aplicativos da web offline. Pode ser √∫til <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-ux#inform_the_user_when_the_app_is_ready_for_offline_consumption" target="_blank" rel="noopener noreferrer">informar o usu√°rio</a> quando o service worker terminar de preencher seus caches (mostrando um Mensagem &quot;Este aplicativo da web funciona offline!&quot;) E tamb√©m inform√°-los quando o service worker tiver obtido as atualiza√ß√µes mais recentes que estar√£o dispon√≠veis na pr√≥xima vez que carregar a p√°gina (mostrando uma mensagem &quot;Novo conte√∫do dispon√≠vel assim que as guias existentes forem fechadas&quot;.). Mostrar essas mensagens √© deixado como um exerc√≠cio para o desenvolvedor, mas como ponto de partida, voc√™ pode fazer uso da l√≥gica inclu√≠da em <a href="https://github.com/facebook/create-react-app/blob/master/packages/cra-template/template/src/serviceWorker.js" target="_blank" rel="noopener noreferrer"><code>src/serviceWorker.js</code></a>, que demonstra quais eventos do ciclo de vida do service worker ouvir para detectar cada cen√°rio e que, por padr√£o, registra apenas as mensagens apropriadas para o Console JavaScript.</p></li><li><p>Service workers <a href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers#you_need_https" target="_blank" rel="noopener noreferrer">requerem HTTPS</a>, embora para facilitar o teste local, essa pol√≠tica <a href="https://stackoverflow.com/questions/34160509/options-for-testing-service-workers-via-http/34161385#34161385" target="_blank" rel="noopener noreferrer">n√£o se aplica a <code>localhost</code></a>. Se o seu servidor web de produ√ß√£o n√£o for compat√≠vel com HTTPS, o registro do service worker falhar√°, mas o resto do seu aplicativo web permanecer√° funcional.</p></li><li><p>O service worker est√° habilitado apenas no <a href="/create-react-app/docs/deployment">ambiente de produ√ß√£o</a>, por exemplo, a sa√≠da de <code>npm run build</code>. √â recomend√°vel que voc√™ n√£o habilite um service worker off-line-first em um ambiente de desenvolvimento, pois isso pode causar frustra√ß√£o quando ativos armazenados em cache anteriormente s√£o usados ‚Äã‚Äãe n√£o incluem as altera√ß√µes mais recentes feitas localmente.</p></li><li><p>Se voc√™ <em>precisa</em> testar seu service worker offline-first localmente, construa o aplicativo (usando <code>npm run build</code>) e execute um servidor http padr√£o a partir de seu diret√≥rio de constru√ß√£o. Depois de executar o script de constru√ß√£o, <code>create-react-app</code> dar√° instru√ß√µes para uma maneira de testar sua constru√ß√£o de produ√ß√£o localmente e as <a href="/create-react-app/docs/deployment">instru√ß√µes de implanta√ß√£o</a> tem instru√ß√µes para usar outros m√©todos. <em>Certifique-se de usar sempre uma janela an√¥nima para evitar complica√ß√µes com o cache do navegador.</em></p></li><li><p>Por padr√£o, o arquivo do service worker gerado n√£o interceptar√° ou armazenar√° em cache qualquer tr√°fego de origem cruzada, como HTTP <a href="/create-react-app/docs/integrating-with-an-api-backend">solicita√ß√µes de API</a>, imagens ou incorpora√ß√µes carregadas de um dom√≠nio diferente. A partir do Create React App 4, ele pode ser personalizado, conforme explicado acima.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="metadata-do-progressive-web-app"></a>Metadata do Progressive Web App<a aria-hidden="true" tabindex="-1" class="hash-link" href="#metadata-do-progressive-web-app" title="Direct link to heading">#</a></h2><p>A configura√ß√£o padr√£o inclui um manifesto de aplicativo da web localizado em <a href="https://github.com/facebook/create-react-app/blob/master/packages/cra-template/template/public/manifest.json" target="_blank" rel="noopener noreferrer"><code>public/manifest.json</code></a>, que voc√™ pode personalizar com detalhes espec√≠ficos para seu aplicativo da web.</p><p>Quando um usu√°rio adiciona um aplicativo da web √† tela inicial usando o Chrome ou Firefox no
Android, os metadados em <a href="https://github.com/facebook/create-react-app/blob/master/packages/cra-template/template/public/manifest.json" target="_blank" rel="noopener noreferrer"><code>manifest.json</code></a> determina o que
√≠cones, nomes e cores de marca a serem usados ‚Äã‚Äãquando o aplicativo da web for exibido.
<a href="https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/" target="_blank" rel="noopener noreferrer">Guia do Manifesto do Aplicativo da Web</a> fornece mais contexto sobre o que cada campo significa e como suas personaliza√ß√µes afetar√° a experi√™ncia de seus usu√°rios.</p><p>Progressive Web Apps que foram adicionados √† tela inicial ser√£o carregados mais rapidamente e v√£o funcionar offline quando houver um service worker ativo. Dito isto, os metadados do manifesto do aplicativo da web ainda ser√£o usados ‚Äã‚Äãindependentemente de n√£o voc√™ opta pelo registro do service worker.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/create-react-app/edit/master/docusaurus/website/../docs/making-a-progressive-web-app.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-01-03T19:02:22.000Z" class="docLastUpdatedAt_217_">03/01/2021</time> by <strong>Fernando Belotto</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/create-react-app/docs/adding-custom-environment-variables"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Adicionando Vari√°veis ‚Äã‚Äãde Ambiente Personalizadas</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/create-react-app/docs/measuring-performance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Medindo o desempenho ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#por-que-ativar" class="table-of-contents__link">Por que ativar?</a></li><li><a href="#personaliza√ß√£o" class="table-of-contents__link">Personaliza√ß√£o</a></li><li><a href="#considera√ß√µes-sobre-offline-first" class="table-of-contents__link">Considera√ß√µes sobre Offline-First</a></li><li><a href="#metadata-do-progressive-web-app" class="table-of-contents__link">Metadata do Progressive Web App</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/create-react-app/docs/getting-started">Comece Agora</a></li><li class="footer__item"><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Aprenda React</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Comunidade</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/create-react-app" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://github.com/facebook/create-react-app/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions</a></li><li class="footer__item"><a href="https://twitter.com/reactjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.contributor-covenant.org/version/1/4/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributor Covenant</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.github.com/facebook/create-react-app" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Facebook Open Source Logo" src="/create-react-app/img/oss_logo.png"></div><div>Direitos autorais ¬© 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/create-react-app/styles.ee02bf09.js"></script>
<script src="/create-react-app/runtime~main.46b2878b.js"></script>
<script src="/create-react-app/main.7b3c9247.js"></script>
<script src="/create-react-app/1.6d04e557.js"></script>
<script src="/create-react-app/2.8f050254.js"></script>
<script src="/create-react-app/53.4a790ed9.js"></script>
<script src="/create-react-app/56.4a6d8523.js"></script>
<script src="/create-react-app/f976f453.32957a55.js"></script>
<script src="/create-react-app/17896441.59709a41.js"></script>
<script src="/create-react-app/04e55f46.e1c2cc54.js"></script>
</body>
</html>